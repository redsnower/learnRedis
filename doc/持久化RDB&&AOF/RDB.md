RDB  
记录 redis的快照 是一个  二进制文件

快照的rdb文件  可以用于恢复文件
触发上述机制：
1.阻塞命令   ==》 save 如果执行数据量大的时候  很慢的时候   其他的请求都会阻塞   

 文件策略  如果存在老的文件  新的会 替换老的  
2.异步命令   ==》 bgsave
fork（） 一个子进程  去执行  会消耗多余内存

3.某种场合自动生成  rdb文件
配置文件中存在  

       秒  改变数  

save 900 1  

save 300 10  

save 60 10000  

 
上文表示  满足下面3个条件就去触发  

900秒中有一条数据改变  重新生成一个 rdb文件   后台执行的也是  bgsave操作  

300秒中有10条数据改变  重新生成一个 rdb文件   后台执行的也是  bgsave操作  

60秒中有10000条数据改变  重新生成一个 rdb文件   后台执行的也是  bgsave操作  

配置文件解析  

dbfilename 表示  rdb文件名 //注意生成rdb文件 是先生成一个副本 等待副本完成以后 再去替换新的  

dir 表示生成 rdb文件的目录  

stop-writes-on-bgsave-error yes  此配置表示 rdb文件生成错误的时候  是否停止写入  yes 表示错误了则不再写入了  


rdbcompression yes 表示写入rdb的时候  是否压缩写入  配置为yes时  在主从复制时  速度更快


1.全量复制
主从复制时  主会生成rdb文件
debug reload 
shutdown 也会触发rdb文件生成













         
  